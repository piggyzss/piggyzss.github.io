<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    
    <!-- Google Tag Manager -->
    <script>
      ;(function(w, d, s, l, i) {
        w[l] = w[l] || []
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' })
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : ''
        j.async = true
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl
        f.parentNode.insertBefore(j, f)
      })(window, document, 'script', 'dataLayer', 'GTM-WJ7P5KL')
    </script>
    <!-- End Google Tag Manager -->

    <!-- 百度统计 -->
    <script>
      var _hmt = _hmt || []
      ;(function() {
        var hm = document.createElement('script')
        hm.src = 'https://hm.baidu.com/hm.js?5a0acc897fd96474a2c8f4deac84611a'
        var s = document.getElementsByTagName('script')[0]
        s.parentNode.insertBefore(hm, s)
      })()
    </script>
    <!-- 百度统计 -->

    
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="vvVgSQUzPU">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content>
    
    <meta name="google-site-verification" content="VQowHv5lAVVWJxjKI9bnAWT7NGdOrfS5KnLF07-B7w0">
    
    <meta name="description" content>
    <title>Hexo - </title>

    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style/style.css"><link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
      <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
      <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
      <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
      <script>
        hljs.initHighlightingOnLoad();
      </script>
  </head>
  <body>
    <div id="fixed-menu">
      <div class="up">
        <svg class="icon" aria-hidden="true">
          <use xlink:href="#icon-fenzu7"/>
        </svg>
      </div>
    </div>
    <div id="progress">
      <div class="line"></div>
    </div>
    <div id="head">
      
      <a href="/" class>
        Home
      </a>
      
      <a href="/archives" class>
        Archives
      </a>
      
      <a href="/about" class>
        About
      </a>
      
      <a href="/music" class>
        music
      </a>
      
    </div>
    <div id="container">
      <div id="main">
        <div class="navbar">
          <div class="toggle">
            <svg class="icon toggle-icon" aria-hidden="true">
              <use xlink:href="#icon-fenzu3"/>
            </svg>
          </div>
          <div class="search">
            <div class="input-warp">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-fenzu"/>
              </svg>
              <input type="text" name id placeholder="Search Keys">
            </div>
          </div>
        </div>
        <div class="content">
          <article class="post-entry">
    <div class="header">
      <div class="title">函数式编程：从入门到放弃</div>
        
        <div class="meta">
        <span>
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-fenzu4"/>
          </svg>
          2019/10/13
        </span>
        <span>
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-fenzu14"/>
          </svg>
          <span>
            
              
            
          </span>
        </span>
        <span>
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-fenzu15"/>
          </svg>
          <span>
            
              
            
          </span>
        </span>
        <span class="leancloud-visitors" id="http://yoursite.com/2019/10/13/函数式编程：从入门到放弃/" data-flag-title="函数式编程：从入门到放弃">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-fenzu6"/>
          </svg>
          <span class="leancloud-visitors-count"></span>
        </span>
        </div>
        
      <div>
      </div>
    </div>
    <h1 id="一、基础概念"><a href="#一、基础概念" class="headerlink" title="一、基础概念"></a>一、基础概念</h1><h2 id="1、什么是函数？"><a href="#1、什么是函数？" class="headerlink" title="1、什么是函数？"></a>1、什么是函数？</h2><p>f(X) = Y<br>含了几个关键点 :<br>函数必须总是接受一个参数<br>函数必须总是返回 一个值<br>函数应该依据接收到的参数(例如 X)而不是外部环境运行<br>对于一个给定的 X，只会输出唯一的一个 Y</p>
<h2 id="2、什么是函数式编程？"><a href="#2、什么是函数式编程？" class="headerlink" title="2、什么是函数式编程？"></a>2、什么是函数式编程？</h2><p>函数式编程是一 种范式，我们能够以此创建仅依赖输入就可以完成自身逻辑的函数。这保证了当函数被多次调用时仍然返回相同的结果(即满足引用透明性)。函数不会改变任何外部环境的变量 ，这将产生可缓存、可测试的代码库。</p>
<p>函数式编程主张以抽象的方式创建函数，这些函数能够在代码其他部分被重用。</p>
<p><strong>ps：命令式和函数式区别</strong><br>用命令式方法遍历数组</p>
<pre><code>var array= (1,2,3]
for(i=O ; i&lt;array.length ; i++)
  console.log(array[i]) //打印 1, 2, 3</code></pre><p>为了解决问题，我们精确地告诉程序应该 “如何”做。<br>我们在告诉编译器“获得数组长度，循环数组，用索引获取每 一个数组元素，等等。” 我们将之称为“命令式”解决方案。命令式编<br>程主张告诉编译器“如何”做。<br>在声明式编程中 ，我们 要告 诉编译器做“什么”，而不是“如何”做。“如何”做的部分将被抽 象到 普通函数中(这些函数被称为高阶函数)。</p>
<pre><code>var array= [1,2,3]
array.forEach((element) =&gt; console.log(element))//打印 1, 2, 3</code></pre><p>上面的代码片段打印了与代码相同的输出 。但是我们移除 了“如何”做的部分，比如“获得数组长度，循环数组，用索引获取每 一个数组元素等等。”我们使用了一个处理“如何”做的抽象函数， 如此可以让开发者只需要关心手头的问题(做“什么”的部分) 。这非常棒! 贯穿本书，我们都将创建这样的内置函数。<br>函数式编程主张以抽象的方式创建函数，这些函数能够在代码 的其他部分被重用。</p>
<h1 id="二、理解函数式编程是什么"><a href="#二、理解函数式编程是什么" class="headerlink" title="二、理解函数式编程是什么"></a>二、理解函数式编程是什么</h1><p>函数式编程有时候被认为是一系列可以补充或替代的其他编程范式的技术，例如:</p>
<ul>
<li>函数是一等公民</li>
<li>纯函数</li>
<li>匿名函数</li>
<li>闭包</li>
<li>柯里化</li>
<li>惰性求值</li>
<li>参数多态</li>
<li>代数数据类型</li>
</ul>
<h2 id="1、函数是一等公民"><a href="#1、函数是一等公民" class="headerlink" title="1、函数是一等公民"></a>1、函数是一等公民</h2><p>当一门语言允许函数作为任何其他数据类型使用时，函数被称为一等公民(First Class Citizens)。也就是说，函数可被赋值给变量，作为参数传递，也可被其他函数返回。<br><strong>–存储函数</strong></p>
<pre><code>let fn = () =&gt; {)</code></pre><p>fn就是一个指向函数数据类型的变量，他是上述函数的引用，因此可以这样调用它<br>fn()<br>上面的代码将执行 fn指向的函数。<br><strong>–传递函数</strong></p>
<pre><code>let argFun = () =&gt; {
  console.log(&#39;hello,wolrd&#39;)
}
let fn = (arg) =&gt; {
  arg()
}
fn(argFun)</code></pre><p><strong>–返回函数</strong></p>
<pre><code>let fn = () =&gt; {
let innerFn = () =&gt; {console.log(&#39;hello,wolrd&#39;)}
return innerFn
}
fn()()</code></pre><p><strong>–高阶函数</strong><br>概念：接受函数作为参数并且/或者返回函数作为输出的函数.<br>用途：抽象通用的问题</p>
<p>上面例子：使用 APlforEach 的用 户不需要理解 forEach是如何实现遍历的，如此问题就被抽象出来了。</p>
<h2 id="2、纯函数"><a href="#2、纯函数" class="headerlink" title="2、纯函数"></a>2、纯函数</h2><p>对于同一参数，返回同一结果<br>该函数结果值不依赖任何隐藏信息或程序执行处理可能改变的状态或在程序的两个不同的执行<br>完全取决于传入的参数<br>不会产生副作用</p>
<p>纯函数的条件之一是不产生副作用。副作用是指函数对其外部世界产生影响，包括：</p>
<ul>
<li>发出 HTTP 调用</li>
<li>改变外部状态</li>
<li>检索今天的日期</li>
<li>Math.random()</li>
<li>向控制台输出消息</li>
<li>向数据库中添加数据</li>
<li>纯函数优点：</li>
<li>更易测试：纯函数本质上就是模块化的，这使它更容易被测试。由于当参数相同时，纯函数总是产⽣相同的结果，你不必担⼼应用其他部分的数据受到影响。在调试期间，这将给予明确定义的额外控制点。</li>
<li>更好维护：纯函数不会产生副作用。这意味着你在重构应用时，纯函数不会对其外部内容产生任何不利影响。</li>
<li>可缓存：纯函数总是为给定的输入返回相同的输出，那么我们就能够缓 存函数 的输出</li>
</ul>
<p><strong>管道与组合</strong><br>纯函数应该被设计为只做一件事。 只做一件事并把它做到完美是 UNIX 的哲学，我们在实现纯函数时也将遵循这一原则。<br>在函数式编程中，函数就是一个管道（pipe），输入一个确定的值即可输出一个确定的新值，没有其他副作用。<br>UNIX 和 Linux 平台有很多用于日常任务的命令。例如， cat用于打印文件内容， grep 用 于搜索文件， WC 用于计算行数等。 这些命令的确一次只解决一个问题。但是我们可以用组合或管道来完成复杂的任务。</p>
<h2 id="3、匿名函数"><a href="#3、匿名函数" class="headerlink" title="3、匿名函数"></a>3、匿名函数</h2><h2 id="4、闭包"><a href="#4、闭包" class="headerlink" title="4、闭包"></a>4、闭包</h2><h2 id="5、柯里化"><a href="#5、柯里化" class="headerlink" title="5、柯里化"></a>5、柯里化</h2><h2 id="6、惰性求值"><a href="#6、惰性求值" class="headerlink" title="6、惰性求值"></a>6、惰性求值</h2><h2 id="7、参数多态"><a href="#7、参数多态" class="headerlink" title="7、参数多态"></a>7、参数多态</h2><h2 id="8、代数数据类型"><a href="#8、代数数据类型" class="headerlink" title="8、代数数据类型"></a>8、代数数据类型</h2><h1 id="二、函数式编程的优势"><a href="#二、函数式编程的优势" class="headerlink" title="二、函数式编程的优势"></a>二、函数式编程的优势</h1><ul>
<li>函数式程序更加易于推断，因为他们有确定性。确定的输入会有确定的输出，在许多情况下可以证明程序是正确的，而不是在大量测试后仍然无法确定程序是否会在意外情况下出错。</li>
<li>函数式程序更加易于测试。没有副作用，所以不需要那些经常用于在测试里隔离程序及外界的mock。</li>
<li>函数式程序更加模块化，值关心输入和输出，不用去处理异常，处理副作用，不用关心上下文变化，并发等。</li>
<li>函数式编程让符合和重新符合更加简单。基础函数组成高级别函数，因为要用骨头吗，所以无须修改就可以为其他程序所重用——例如编写了一个求和函数，A程序可以用，B程序也可以用。</li>
<li>函数式程序总是线程安全的，因为防止了共享状态的变化。并不意外这所有数据都不需要改变，只有共享数据才需要。</li>
</ul>


  

  <!---->
  <!--<div class="post-reward">-->
    <!--<div id="reward-button">请杯咖啡呗~</div>-->
    <!--<div id="qr">-->
      <!--<div class="wrap">-->
          <!---->
          <!--<div class="bg-wrap">-->
            <!--<a href="/images/zhifubao.png" target="_block" class="bg" style="background-image:url('/images/zhifubao.png')"></a>-->
            <!--支付宝-->
          <!--</div>-->
          <!---->
          <!---->
          <!--<div class="bg-wrap">-->
              <!--<a href="/images/weixin.png" target="_block" class="bg" style="background-image:url('/images/weixin.png')"></a>-->
            <!--微信-->
          <!--</div>-->
          <!---->
      <!--</div>-->
    <!--</div>-->
    <!---->

  <!--</div>-->

  <!--<div class="post-copyright">-->
    <!--<div class="auth">-->
      <!--本文作者：<a href="http://yoursite.com">shanshan</a>-->
    <!--</div>-->
    <!--<div class="link">-->
      <!--永久链接：<a href="http://yoursite.com/2019/10/13/函数式编程：从入门到放弃/">http://yoursite.com/2019/10/13/函数式编程：从入门到放弃/</a>-->
    <!--</div>-->
    <!--<div class="declare">-->
      <!--版权声明：本文首发于<a href="http://yoursite.com">shanshan</a>的博客，转载请注明出处！-->
    <!--</div>-->
  <!--</div>-->

    <!-- Comments -->
    <div class="comments" id="zss">
        
            <br><br>
            
            <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script>
        var disqus_shortname = 'shanshan';
        var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2019/10/13/函数式编程：从入门到放弃/';
            this.page.identifier = '/2019/10/13/函数式编程：从入门到放弃/';
        };
        (function() {
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript';
            s.src = '//'+disqus_shortname+'.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow noopener">comments powered by Disqus.</a></noscript>
</div>

    <div id="gitment_title" class="gitment_title"></div>
    <div id="container" style="display:none"></div>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
      const myTheme = {
        render(state, instance) {
          const container = document.createElement('div');
          container.lang = "en-US";
          container.className = 'gitment-container gitment-root-container';
          container.appendChild(instance.renderHeader(state, instance));
          container.appendChild(instance.renderEditor(state, instance));
          container.appendChild(instance.renderComments(state, instance));
          container.appendChild(instance.renderFooter(state, instance));
          return container;
        }
      }
      function showGitment() {
        $("#gitment_title").attr("style", "display:none");
        $("#zss").attr("style", "").addClass("gitment_container");
        var gitment = new Gitment({
          id: decodeURI(window.location.pathname),
          theme: myTheme,
          owner: 'piggyzss',
          repo: 'piggyzss.github.io/',
          oauth: {
            client_id: '09a2760e2209a8728279',
            client_secret: '1162d7e456f9c8d3f15f164e63f5d253679445a5'
          }
        });
        gitment.render('zss');
      }
      showGitment();
    </script>

        
    </div>

  <!--<div id="comment"></div>-->

</article>
        </div>
        <footer>
          <div class="copyright">
            ©2019 <a href="http://yoursite.com">shanshan</a>. Powered by Hexo &
            <a href="https://github.com/shixiaohu2206/hexo-theme-huhu">hexo-theme-huhu</a>
          </div>
          
        </footer>
      </div>
      <div id="card-wrap">
        <div class="card">
          <div class="logo-widget">
            <div class="author">
              SecretGarden
            </div>
            <!--<div class="logo" style="background-image: url('/images/logo.jpeg')"></div>-->
          </div>
          <div class="locate-widget">
            <div class="city-wrap">
              <svg class="icon location" aria-hidden="true">
                <use xlink:href="#icon-fenzu9"/>
              </svg>
              <span id="city-name"></span>
            </div>
            <div class="weather-wrap">
              <div id="weather-img">
                <svg class="icon weather" aria-hidden="true">
                  <use xlink:href="#icon-qingjiafeng"/>
                </svg>
              </div>
              <div id="weather-detail"></div>
            </div>
          </div>
          <div class="follow-widget">
            
            <a href="https://github.com/shixiaohu2206" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-github"/>
              </svg>
            </a>
            
            <a href="https://www.facebook.com/shi.xiaohu.5" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-facebook"/>
              </svg>
            </a>
            
            <a href="https://www.instagram.com/shi_xiaohu/" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-instagram"/>
              </svg>
            </a>
             
            <a href="/atom.xml" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-rss"/>
              </svg>
            </a>
            
          </div>
           
          <div class="toc-widget">
            <div class="title">
              <span>Toc</span>
            </div>
            <div class="post-toc">
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、基础概念"><span class="toc-text">一、基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、什么是函数？"><span class="toc-text">1、什么是函数？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、什么是函数式编程？"><span class="toc-text">2、什么是函数式编程？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、理解函数式编程是什么"><span class="toc-text">二、理解函数式编程是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、函数是一等公民"><span class="toc-text">1、函数是一等公民</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、纯函数"><span class="toc-text">2、纯函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、匿名函数"><span class="toc-text">3、匿名函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、闭包"><span class="toc-text">4、闭包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、柯里化"><span class="toc-text">5、柯里化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、惰性求值"><span class="toc-text">6、惰性求值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、参数多态"><span class="toc-text">7、参数多态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、代数数据类型"><span class="toc-text">8、代数数据类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、函数式编程的优势"><span class="toc-text">二、函数式编程的优势</span></a></li></ol>
            </div>
          </div>
           
          <div class="category-widget">
            <div class="title">
              <span>Categories</span>
              <span><a href="/archives">···</a></span>
            </div>
            <div class="list">
              <ul>
                 
                <li>
                  <a href="/categories/code/">
                    code
                  </a>
                </li>
                 
              </ul>
            </div>
          </div>
          <div class="tag-widget">
            <div class="title">
              <span>Tag Cloud</span>
              <span><a href>···</a></span>
            </div>
            <div class="tag-cloud">
              <a href="/tags/React/" style="font-size: 16.5px; color: #4a4a4a">React</a> <a href="/tags/前端/" style="font-size: 20px; color: #4a4a4a">前端</a> <a href="/tags/设计模式/" style="font-size: 13px; color: #4a4a4a">设计模式</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJ7P5KL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  
</html>
<script type="text/javascript">
  window.THEME_CONFIG = JSON.parse('{"title":"Hexo","subtitle":null,"description":null,"author":"shanshan","language":"en","timezone":null,"url":"http://yoursite.com","root":"/","permalink":":year/:month/:day/:title/","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":true,"relative_link":false,"future":true,"highlight":{"enable":false,"auto_detect":false,"line_number":true,"tab_replace":null},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":10,"pagination_dir":"page","theme":"hexo-theme-huhu","deploy":{"type":"git","repository":"https://github.com/piggyzss/piggyzss.github.io.git","branch":"master"},"ignore":[],"keywords":null,"highlight_theme":"normal","index_generator":{"per_page":10,"order_by":"-date","path":""},"gitment":{"enable":true,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":"piggyzss","github_repo":"piggyzss.github.io/","client_id":"09a2760e2209a8728279","client_secret":"1162d7e456f9c8d3f15f164e63f5d253679445a5","proxy_gateway":null,"redirect_protocol":null},"archive_generator":{"per_page":10,"yearly":true,"monthly":true,"daily":false},"category_generator":{"per_page":10},"tag_generator":{"per_page":10},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true,"modifyAnchors":"","autolink":true},"server":{"port":4000,"log":false,"compress":false,"header":true},"menu":{"home":"/","archives":"/archives","about":"/about","music":"/music"},"logo":"/images/logo.png","categories_max":5,"tags_max":10,"favicon":"/images/favicon.ico","site_search":true,"rss":"/atom.xml","follow":{"github":"https://github.com/shixiaohu2206","facebook":"https://www.facebook.com/shi.xiaohu.5","instagram":"https://www.instagram.com/shi_xiaohu/"},"search_url":"/search.xml","site_icp":"","site_friends":{"房间里的小猫咪":"http://baidu.com"},"changyan":{"appid":"","conf":""},"valine":{"API_ID":"FjXColpwTL0BsrjJIN8Pmnn0-gzGzoHsz","API_KEY":"Ar7tucPRn3KV7UOidQxESoys"},"busuanzi":true,"share":["weibo","weixin","qqkongjian","QQ","douban","facebook","twitter","google"],"cdn_module":{"av_min":"https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min","jquery":"https://cdn.bootcss.com/jquery/3.4.1/jquery.min","busuanzi":"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini","confirm":"https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min","fancybox":"https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min"},"google_site_verification":"VQowHv5lAVVWJxjKI9bnAWT7NGdOrfS5KnLF07-B7w0","gtm_id":"GTM-WJ7P5KL","baidu_push":true,"reward":{"weixin":"images/weixin.png","zhifubao":"images/zhifubao.png"},"disqus":{"shortname":"shanshan"},"post":{"date_format":"dddd, MMMM Do YYYY, h:mm a","comments":{"enable":true,"type":"disqus"}}}')
  window.loadJs = function(d, m, a) {
    var c = document.getElementsByTagName('head')[0] || document.head || document.documentElement
    var b = document.createElement('script')
    b.defer = true
    b.setAttribute('type', 'text/javascript')
    b.setAttribute('charset', 'UTF-8')
    b.setAttribute('async', 'true')
    b.setAttribute('src', d)
    m && b.setAttribute('data-main', '/scripts/app')
    if (typeof a === 'function') {
      if (window.attachEvent) {
        b.onreadystatechange = function() {
          var e = b.readyState
          if (e === 'loaded' || e === 'complete') {
            b.onreadystatechange = null
            a()
          }
        }
      } else {
        b.onload = a
      }
    }
    c.appendChild(b)
  }
  loadJs('https://cdn.bootcss.com/require.js/2.3.6/require.min.js', true, function() {
    require.config({
      paths: {
        // site
        share: 'share',
        iconfont: 'iconfont',
        hodgepodge: 'hodgepodge',
        valine: ['cdn/Valine.min'],

        // cdn
        av: ['https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min', 'cdn/av-min'],
        jquery: ['https://cdn.bootcss.com/jquery/3.4.1/jquery.min', 'cdn/jquery.min'],
        busuanzi: ['//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini', 'cdn/busuanzi.pure.mini'],
        confirm: ['https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min', 'cdn/jquery.confirm.min'],
        fancybox: ['https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min', 'cdn/jquery.fancybox.min']
      },

      map: {
        '*': {
          // css: '/scripts/cdn/css-min.js'
          css: 'https://cdn.bootcss.com/require-css/0.1.10/css.min.js'
        }
      },

      shim: {
        fancybox: {
          // deps: ['css!../style/fancybox']
          deps: ['css!https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css']
        },
        confirm: {
          // deps: ['css!../style/confirm']
          deps: ['css!https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css']
        }
      },

      // 加载超时
      waitSeconds: 3
    })
  })
</script>

<script>
  ;(function() {
    var bp = document.createElement('script')
    var curProtocol = window.location.protocol.split(':')[0]
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'
    } else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js'
    }
    var s = document.getElementsByTagName('script')[0]
    s.parentNode.insertBefore(bp, s)
  })()
</script>

